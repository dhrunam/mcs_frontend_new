<div data-aos="fade-right" data-aos-duration="500">
    <header class="d-flex justify-content-between align-items-center">
        <h4>Monthly Case Statement Report</h4>
    </header>
    <hr>

    <!-- <span class="text-center"><h5></h5></span> -->

    <div class="row g-3 mb-0">
            <div class="row g-3  d-flex align-items-end">
                <div class="col-3 col-lg-2">
                    <label for="month" class="form-label ">Month <span class="text-danger">*</span></label>
                    <select class="form-select shadow-none" name="month" [(ngModel)]="selectedMonth" [disabled]="showLoader" (change)="ResetReport()">
                        <option value="">---Select Month---</option>
                        <option value="January">January</option>
                        <option value="February">February</option>
                        <option value="March">March</option>
                        <option value="April">April</option>
                        <option value="May">May</option>
                        <option value="June">June</option>
                        <option value="July">July</option>
                        <option value="August">August</option>
                        <option value="September">September</option>
                        <option value="October">October</option>
                        <option value="November">November</option>
                        <option value="December">December</option>
                    </select>
                </div>
                <div class="col-3 col-lg-2">
                    <label for="year" class="form-label ">Year <span class="text-danger">*</span></label>
                    <select class="form-select shadow-none" name="year" [(ngModel)]="selectedYear" [disabled]="showLoader" (change)="ResetReport()">
                        <option value="0">---Select Year---</option>
                            <option *ngFor="let year of years" [value]="year">
                                {{ year }}
                              </option>
                    </select>
                </div>
                <div class="col-3 col-lg-2">
                    <label for="year" class="form-label ">Case Type <span class="text-danger">*</span></label>
                    <select class="form-select shadow-none" name="caseType" [(ngModel)]="selectedCivilCriminal" [disabled]="showLoader" (change)="ResetReport()">
                        <option value="">---Select Case Type---</option>
                            <option value="civil">Civil</option>
                            <option value="criminal">Criminal</option>
                    </select>
                </div>


                <div class="col-3 col-lg-2">
                    <label for="year" class="form-label ">Organization <span class="text-danger">*</span></label>
                    <select class="form-select shadow-none" name="user" [(ngModel)]="selectedOrganization" [disabled]="showLoader" (change)="OnOrganizationChange($event)">
                        <option value="">---Select Organization---</option>
                            <option *ngFor="let org of organisationList" [value]="org.id">
                                {{ org.organization_name }}
                              </option>
                    </select>
                </div>

                <div class="col-3 col-lg-2 text-end text-lg-start mt-0">
                    <button class="btn btn-primary" type="button" [disabled]="showLoader" (click)="LoadMonthlyStatement()">
                        @if(showLoader){
                            <span class="spinner-border spinner-border-sm" aria-hidden="true"></span>
                        }
                        @else{
                            <i class="bi bi-search"></i>
                        }
                    </button>
                </div>
            </div>
    </div>
    <div class="row g-3 mt-4 mb-0" id="table-to-pdf">
        <span class="text-center" *ngIf="caseStatements.length > 0"><h5>STATEMENT OF {{selectedCivilCriminal | uppercase }} CASES IN THE {{filteredOrganization?.organization_name | uppercase}}, FOR THE MONTH OF {{selectedMonth | uppercase}}, {{selectedYear}}</h5></span>
        <table class="table table-bordered" *ngIf="caseStatements[0]">
            <thead class="table-header">
                <tr>
                    <th scope="col" class="text-center" style="width: 18%;">Description of Cases</th>
                    <th scope="col" class="text-center" style="width: 8%;">Pending at the beginning of the month</th>
                    <th scope="col" class="text-center" style="width: 8%;">Instituted during the month</th>
                    <th scope="col" class="text-center" style="width: 5%;">Total</th>
                    <th scope="col" colspan="3" class="text-center" style="width: 15%;">No of cases disposed of during the month</th>
                    <th scope="col" class="text-center" style="width: 3%">Pending in hand</th>
                    <th scope="col" colspan="2" class="text-center" style="width: 15%;">Pending more than</th>
                    <th scope="col" class="text-center" style="width: 8%;">Date of oldest cases</th>
                    <th scope="col" class="text-center" style="width: 5%;">UNIT</th>
                    <th scope="col" class="text-center" style="width: 5%;">No.of working days</th>
                    <th scope="col" class="text-center" style="width: 10%;">REMARKS</th>
                </tr>
                <tr>
                    <th scope="col"></th>
                    <th scope="col"></th>
                    <th scope="col"></th>
                    <th scope="col"></th>
                    <th scope="col" class="text-center">Contested</th>
                    <th scope="col" class="text-center">Uncontested</th>
                    <th scope="col" class="text-center">Transferred</th>
                    <th scope="col"></th>
                    <th scope="col" class="text-center">2 yrs</th>
                    <th scope="col" class="text-center">4 yrs</th>
                    <th scope="col"></th>
                    <th scope="col"></th>
                    <th scope="col" class="text-center">{{noOfWorkingDays}}</th>
                    <th scope="col"></th>
                </tr>
            </thead>
            <tbody>
                @for(c of caseStatements; track c; let i=$index){
                <tr>
                    <td >{{ c.desc_case }}</td>
                    <td class="text-center">
                        {{c.pending_start_of_month}}
                    </td>
                    <td class="text-center">
                        {{c.instituted_during_the_month}}
                    </td>
                    <td class="text-center">
                        {{c.total_count}}
                    </td>
                    <td class="text-center">
                        {{c.count_disposed_contested}}
                    </td>
                    <td class="text-center">
                        {{c.count_disposed_uncontested}}
                    </td>
                    <td class="text-center">
                        {{c.count_disposed_transferred}}
                    </td>
                    <td class="text-center">
                         {{c.pending_in_hand}}
                    </td>
                    <td class="text-center">
                        {{c.pending_more_then_2yrs}}
                    </td>
                    <td class="text-center">
                        {{c.pending_more_then_4yrs}}
                    </td>
                    <td class="text-center">
                        {{c.date_of_oldest_case | date: 'dd-MMM-YYYY'}}
                    </td>
                    <td class="text-center">
                        {{c.unit}}
                    </td>
                    <td class="text-center">
                        <!-- {{c.no_of_working_days}} -->
                    </td>
                    <td>
                       {{c.remarks}}
                    </td>
                </tr>
                }
                <tr>
                    <td class="fw-bold">TOTAL</td>
                    <td class="text-center fw-bold">{{grandTotal.pending_start_of_month}}</td>
                    <td class="text-center fw-bold">{{grandTotal.instituted_during_the_month}}</td>
                    <td class="text-center fw-bold">{{grandTotal.total_count}}</td>
                    <td class="text-center fw-bold">{{grandTotal.count_disposed_contested}}</td>
                    <td class="text-center fw-bold">{{grandTotal.count_disposed_uncontested}}</td>
                    <td class="text-center fw-bold">{{grandTotal.count_disposed_transferred}}</td>
                    <td class="text-center fw-bold">{{grandTotal.pending_in_hand}}</td>
                    <td class="text-center fw-bold">{{grandTotal.pending_more_then_2yrs}}</td>
                    <td class="text-center fw-bold">{{grandTotal.pending_more_then_4yrs}}</td>
                    <td class="text-center fw-bold"></td>
                    <td class="text-center fw-bold">{{grandTotal.unit}}</td>
                    <td class="text-center fw-bold">{{grandTotal.no_of_working_days}}</td>
                    <td class="text-center fw-bold"></td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="row g-3 mt-0 mb-0 justify-content-center">
        <div class="col-12 col-lg-2 text-end text-lg-start">
            <button *ngIf="caseStatements.length > 0" class="btn btn-primary btn-lg w-100" (click)="GenerateReport()">Export as PDF <i class="bi bi-file-pdf"></i></button>
        </div>
    </div>

</div>
